(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{32:function(n,t,e){"use strict";e.r(t);var o,i,r,a,c,s,l,u,p,m,h,f,y=e(0),d=e.n(y),x=e(13),b=e.n(x),g=e(4),j=e(11),k=e(5),v=e.n(k),w=e(3),O=e(2),S=O.c.div(o||(o=Object(w.a)([""]))),R=e(1),C=Object(y.memo)((function(n){var t=n.blocklyConfig,e=n.blocklyToolboxConfig,o=n.blocklyWorkspaceRef,i=n.setRemainingBlocks,r=n.style,a=Object(y.useState)(null),c=Object(g.a)(a,2),s=c[0],l=c[1],u=e.blocks;Object(y.useEffect)((function(){window.Blockly=v.a}),[]),Object(y.useEffect)((function(){u.custom&&u.custom.forEach((function(n){v.a.Blocks[n.type]={init:function(){this.jsonInit(n)}},v.a.JavaScript[n.type]=n.generatorCallback}))}),[s,u]),Object(y.useEffect)((function(){s&&(s.addChangeListener((function(){i(s.remainingCapacity())})),i(s.remainingCapacity()))}),[s,i]);var p=Object(y.useMemo)((function(){if(!u.builtin&&!u.custom)return{kind:"",contents:[]};var n={kind:"flyoutToolbox",contents:[]};return u.builtin&&Array.isArray(u.builtin)&&u.builtin.forEach((function(t){return n.contents.push({kind:"block",type:t})})),u.custom&&Array.isArray(u.custom)&&u.custom.forEach((function(t){var e=t.type;return n.contents.push({kind:"block",type:e})})),n}),[u]);return Object(y.useEffect)((function(){var n=Object(j.a)(Object(j.a)({},t||{}),{},{toolbox:p,trashcan:!0}),e=document.querySelector(".blockly-div");if(e){var o=v.a.inject(e,n);return l(o),v.a.JavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",v.a.JavaScript.addReservedWords("highlightBlock"),o.dispose.bind(o)}}),[p,t]),Object(y.useEffect)((function(){o.current=s}),[s,o]),Object(R.jsx)(S,{className:"blockly-div",style:r})})),E={title:"light",colors:{primary:"#1542c7",secondary:"royalblue",text:"#ffffff",game:{background:"#f0f0ff"},map:{background:"#a1aaf8",path:{background:"#e2e4f7",border:"rgb(161, 170, 248, 0.4)"}},background:"#f5f5f5",player:{collision:"red",finish:"#00ff00"}}},_=Object(O.b)(i||(i=Object(w.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    outline: none;\n    font-family: sans-serif;\n  }\n"]))),F=O.c.div(r||(r=Object(w.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  min-height: 100%;\n  padding: 1rem;\n"]))),z=O.c.div(a||(a=Object(w.a)(["\n  height: calc(100vh - 2rem);\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  padding-right: 1rem;\n  flex: 1;\n  max-width: calc(100vh - 9rem);\n"]))),T=O.c.button(c||(c=Object(w.a)(['\n  border: none;\n  background-color: royalblue;\n  color: white;\n  padding: 0.7rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n  box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.5);\n\n  &::before {\n    content: "Run";\n  }\n\n  &.running {\n    background-color: #6387f3;\n    &::before {\n      content: "Restart";\n    }\n  }\n\n  &.collision,\n  &.fail {\n    &::before {\n      content: "Restart";\n    }\n  }\n\n  &.finish {\n    &::before {\n      content: "Next";\n    }\n  }\n']))),B=Object(O.b)(s||(s=Object(w.a)(["\n  .blockly-div {\n    flex: 1;\n    height: calc(100vh - 2rem);\n  }\n\n  .game-button-container ul {\n    margin-bottom: 1rem;\n  }\n\n  .game-button-container .game {\n    margin-bottom: 1rem;\n  }\n\n  @media screen and (max-width: 700px) {\n    .app {\n      flex-direction: column;\n      padding: 0.5rem;\n    }\n\n    .game-button-container {\n      width: 100%;\n      padding-right: 0;\n    }\n\n    .game, .paging-list {\n      margin-bottom: 0.5rem;\n    }\n\n    .blockly-div {\n      width: 100%;\n      height: 70vh;\n      margin-top: 0.5rem;\n    }\n  }\n"]))),L={type:"movement_forward",message0:"forward",previousStatement:null,nextStatement:null,colour:285,tooltip:"Moves one step forward",helpUrl:"",generatorCallback:function(){return"forward();\n"}},P={type:"movement_rotate",message0:"turn %1 %2",args0:[{type:"input_dummy"},{type:"field_dropdown",name:"direction",options:[["left \u21ba","L"],["right \u21bb","R"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:285,tooltip:"Turn to the specified direction",helpUrl:"",generatorCallback:function(n){return"L"===n.getFieldValue("direction")?"turnLeft();\n":"turnRight();\n"}},N={type:"controls_if_path",message0:"if path %1 %2 %3 do %4",args0:[{type:"input_dummy"},{type:"field_dropdown",name:"direction",options:[["ahead","A"],["to the left \u21ba","L"],["to the right \u21bb","R"]]},{type:"input_dummy"},{type:"input_statement",name:"statement"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:210,tooltip:"Execute the 'do' statement if is possible to go to the specified direction",helpUrl:"",generatorCallback:function(n){var t=n.getFieldValue("direction");return"if (".concat("A"===t?"isPathForward()":"L"===t?"isPathToLeft()":"isPathToRight()",") {\n  ").concat(window.Blockly.JavaScript.statementToCode(n,"statement")||"","\n}")}},A={type:"controls_if_else_path",message0:"if path %1 %2 %3 do %4 else %5",args0:[{type:"input_dummy"},{type:"field_dropdown",name:"direction",options:[["ahead","A"],["to the left \u21ba","L"],["to the right \u21bb","R"]]},{type:"input_dummy"},{type:"input_statement",name:"truthy_statement"},{type:"input_statement",name:"falsy_statement"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:210,tooltip:"Execute the 'do' statement if is possible to go to the specified direction. Otherwise, it executes the 'else' statement.",helpUrl:"",generatorCallback:function(n){var t=n.getFieldValue("direction");return"if (".concat("A"===t?"isPathForward()":"L"===t?"isPathToLeft()":"isPathToRight()",") {\n  ").concat(window.Blockly.JavaScript.statementToCode(n,"truthy_statement")||"","\n} else {\n  ").concat(window.Blockly.JavaScript.statementToCode(n,"falsy_statement")||"","\n}")}},M={type:"controls_repeat_until_reach_end",message0:"repeat until \u2690 %1 do %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"statement"}],previousStatement:null,nextStatement:null,colour:120,tooltip:"Repeat the inside code until end is reached",helpUrl:"",generatorCallback:function(n){return"while (notDone()) {\n  ".concat(window.Blockly.JavaScript.statementToCode(n,"statement")||"","\n}")}},q=[{toolbox:{blocks:{builtin:[],custom:[L,P]}},map:{size:{rows:20,columns:20},path:[{x:9,y:10},{x:10,y:10},{x:11,y:10}],start:{x:9,y:10},finish:{x:11,y:10}},blockly:{}},{toolbox:{blocks:{builtin:[],custom:[L,P,M]}},map:{size:{rows:20,columns:20},path:[{x:9,y:10},{x:10,y:10},{x:11,y:10},{x:11,y:9},{x:11,y:8},{x:11,y:7},{x:11,y:6},{x:11,y:5}],start:{x:9,y:10},finish:{x:11,y:5}},blockly:{maxBlocks:5}},{toolbox:{blocks:{builtin:[],custom:[L,P,N,M]}},map:{size:{rows:20,columns:20},path:[{x:9,y:10},{x:10,y:10},{x:11,y:10},{x:12,y:10},{x:12,y:9},{x:12,y:8},{x:12,y:7},{x:12,y:6},{x:12,y:5},{x:11,y:5},{x:10,y:5},{x:9,y:5},{x:8,y:5},{x:7,y:5},{x:6,y:5},{x:6,y:6},{x:6,y:7},{x:6,y:8},{x:6,y:9},{x:6,y:10}],start:{x:9,y:10},finish:{x:6,y:10}},blockly:{maxBlocks:4}},{toolbox:{blocks:{builtin:[],custom:[L,P,N,M]}},map:{size:{rows:20,columns:20},path:[{x:8,y:10},{x:9,y:10},{x:10,y:10},{x:11,y:10},{x:11,y:9},{x:11,y:8},{x:11,y:7},{x:11,y:6},{x:11,y:5},{x:11,y:4},{x:12,y:4},{x:13,y:4},{x:14,y:4}],start:{x:8,y:10},finish:{x:14,y:4}},blockly:{maxBlocks:6}},{toolbox:{blocks:{builtin:[],custom:[L,P,N,A,M]}},map:{size:{rows:20,columns:20},path:[{x:10,y:12},{x:11,y:12},{x:12,y:12},{x:13,y:12},{x:13,y:11},{x:13,y:10},{x:13,y:9},{x:13,y:8},{x:13,y:7},{x:13,y:6},{x:13,y:5},{x:13,y:4},{x:12,y:4},{x:11,y:4},{x:10,y:4},{x:9,y:4},{x:8,y:4},{x:7,y:4},{x:6,y:4},{x:5,y:4},{x:4,y:4},{x:3,y:4},{x:2,y:4},{x:1,y:4},{x:12,y:6},{x:11,y:6},{x:11,y:5},{x:8,y:3},{x:8,y:2},{x:8,y:1},{x:9,y:1},{x:10,y:1},{x:5,y:5},{x:5,y:6},{x:5,y:7},{x:5,y:8},{x:5,y:9},{x:5,y:10},{x:5,y:11},{x:5,y:12},{x:4,y:10},{x:3,y:10},{x:6,y:10},{x:7,y:10}],start:{x:10,y:12},finish:{x:1,y:4}},blockly:{maxBlocks:7}}],D=O.c.div(l||(l=Object(w.a)(["\n  overflow-x: auto;\n  background-color: ",";\n  border: 1px solid ",";\n  position: relative;\n\n  --animation-duration: 250ms;\n"])),(function(n){return n.theme.colors.game.background}),(function(n){return n.theme.colors.map.path})),I=O.c.div(u||(u=Object(w.a)(["\n  position: absolute;\n  bottom: 0;\n  font-size: 1rem;\n  color: ",";\n  text-shadow: 0 0 0.1rem rgba(0, 0, 0, 0.3);\n  padding: 0.2rem;\n"])),(function(n){return n.theme.colors.text})),J=O.c.div(p||(p=Object(w.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  background-color: ",";\n  position: relative;\n  user-select: none;\n"])),(function(n){return n.theme.colors.map.background})),U=O.c.div(m||(m=Object(w.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),W=O.c.div(h||(h=Object(w.a)(["\n  --columns: ",";\n  --rows: ",";\n  --map-width: ",";\n  --color-extern: ",";\n  --color-path: ",";\n  --color-path-line: ",";\n  --square-size: calc((1px * var(--map-width) - 2rem) / var(--columns));\n\n  width: calc(100% / var(--columns));\n  height: var(--square-size);\n\n  &.path,\n  &.finish,\n  &.start {\n    background-color: var(--color-path);\n    border-top: 1px solid var(--color-path-line);\n    border-right: 1px solid var(--color-path-line);\n  }\n\n  &.extern {\n    background-color: var(--color-extern);\n  }\n\n  &.finish {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(var(--square-size) * 0.9);\n    color: ",";\n  }\n"])),(function(n){return n.mapDimensions.columns}),(function(n){return n.mapDimensions.rows}),(function(n){return n.mapDimensions.width}),(function(n){return n.theme.colors.map.background}),(function(n){return n.theme.colors.map.path.background}),(function(n){return n.theme.colors.map.path.border}),(function(n){return n.theme.colors.primary})),V=O.c.div(f||(f=Object(w.a)(["\n  width: calc(100% / var(--columns));\n  height: var(--square-size);\n  position: absolute;\n  left: calc(var(--column) * var(--square-size) + 1rem);\n  top: calc(var(--row) * var(--square-size) + 1rem);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: rotateZ(calc(var(--angle) * -1deg));\n  line-height: var(--square-size);\n  overflow: hidden;\n\n  --row: ",";\n  --column: ",";\n  --angle: ",";\n  --columns: ",";\n  --map-width: ",";\n  --square-size: calc((1px * var(--map-width) - 2rem) / var(--columns));\n\n  &.running {\n    transition-duration: var(--animation-duration);\n  }\n\n  &.collision {\n    color: ",";\n  }\n\n  &.finish {\n    color: ",";\n  }\n"])),(function(n){return n.coordinates.position.y}),(function(n){return n.coordinates.position.x}),(function(n){return n.coordinates.angle}),(function(n){return n.mapDimensions.columns}),(function(n){return n.mapDimensions.width}),(function(n){return n.theme.colors.player.collision}),(function(n){return n.theme.colors.player.finish}));function G(n){switch(n){case Q.Running:return"running";case Q.Stop:return"stop";case Q.Collision:return"collision";case Q.Fail:return"fail";case Q.Finish:return"finish"}}function H(n){var t=n.gameStatus,e=n.map,o=n.player,i=Object(y.useState)(0),r=Object(g.a)(i,2),a=r[0],c=r[1];Object(y.useEffect)((function(){function n(){var n=document.querySelector(".map"),t=(n?window.getComputedStyle(n):{width:"0"}).width;c(parseInt(t||"0"))}return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[c]);var s=e.size.rows,l=e.size.columns,u=function(n){for(var t=n.map,e=n.rows,o=n.columns,i=[],r=0;r<e;r++)i[r]=[],i[r].length=o;for(var a=function(n){for(var e=function(e){var o=t.path.find((function(t){return t.x===e&&t.y===n}));i[n][e]=o?"path":"extern"},r=0;r<o;r++)e(r)},c=0;c<e;c++)a(c);return t.start&&(i[t.start.y][t.start.x]="start"),t.finish&&(i[t.finish.y][t.finish.x]="finish"),i}({map:e,rows:s,columns:l}),p={columns:l,rows:s,width:a};return Object(R.jsxs)(J,{className:"map",children:[u.map((function(n,t){return Object(R.jsx)(U,{children:n.map((function(n,t){return Object(R.jsx)(W,{mapDimensions:p,className:"column ".concat(n),children:"finish"===n?"\u2690":""},"column-".concat(t))}))},"row-".concat(t))})),Object(R.jsx)(V,{mapDimensions:p,coordinates:o,className:G(t),children:"\u27a4"})]})}function X(n){var t=n.player,e=n.map;return t.position.x===e.finish.x&&t.position.y===e.finish.y}function Z(n,t){var e=n.x,o=n.y;return!!Array.isArray(t)&&void 0!==t.find((function(n){return n.x===e&&n.y===o}))}function K(n,t,e){n=Math.abs(n%360+360)%360;var o=t.position.x,i=t.position.y,r=e.size,a=r.columns,c=r.rows;return 0===n?o<a-1&&Z({x:o+1,y:i},e.path):90===n?i>0&&Z({x:o,y:i-1},e.path):180===n?o>0&&Z({x:o-1,y:i},e.path):270===n&&(i<c-1&&Z({x:o,y:i+1},e.path))}var Q,Y,$,nn={forward:function(){this.workspace&&(this.workspace.lastExecutedFunction="forward");var n=Math.abs(this.player.angle%360+360)%360,t=this.player.position.x,e=this.player.position.y,o=this.map.size,i=o.columns,r=o.rows;0===n&&t+1<i?this.player.position.x++:90===n&&e?this.player.position.y--:180===n&&t?this.player.position.x--:270===n&&e+1<r&&this.player.position.y++,this.refresh({})},turnLeft:function(){this.workspace.lastExecutedFunction="turnLeft",this.player.angle+=90,this.refresh({})},turnRight:function(){this.workspace.lastExecutedFunction="turnRight",this.player.angle-=90,this.refresh({})},notDone:function(){return this.workspace.lastExecutedFunction="notDone",!X({player:this.player,map:this.map})},isPathForward:function(){return this.workspace.lastExecutedFunction="isPathForward",K(this.player.angle,this.player,this.map)},isPathToLeft:function(){return this.workspace.lastExecutedFunction="isPathToLeft",K(this.player.angle+90,this.player,this.map)},isPathToRight:function(){return this.workspace.lastExecutedFunction="isPathToRight",K(this.player.angle-90,this.player,this.map)},highlightBlock:function(n){this.workspace.highlightBlock(n)}};function tn(n){for(var t=n.player,e=n.map,o=0;o<e.path.length;o++)if(e.path[o].x===t.position.x&&e.path[o].y===t.position.y)return!1;return!0}function en(n){var t=n.gameRef,e=n.gameStatus,o=n.onGameStatusChange,i=n.map,r=n.player,a=n.blocklyWorkspaceRef,c=n.remainingBlocks,s=Object(y.useState)({}),l=Object(g.a)(s,2)[1];Object(y.useEffect)((function(){i.start&&(r.position.x=i.start.x,r.position.y=i.start.y)}),[i,r]);var u=Object(y.useCallback)((function(){tn({player:r,map:i})&&o(Q.Collision),l({})}),[l,o,r,i]);return t.current={interpreterInitHandler:function(n,t){var e={player:r,map:i,workspace:a.current,refresh:u};Object.keys(nn).forEach((function(o){n.setProperty(t,o,n.createNativeFunction(nn[o].bind(e)))}))}},Object(R.jsxs)(D,{className:"game",children:[Object(R.jsx)(H,{gameStatus:e,player:r,map:i}),c!==1/0&&Object(R.jsx)(I,{children:"Remaining blocks: ".concat(c)})]})}!function(n){n[n.Running=0]="Running",n[n.Stop=1]="Stop",n[n.Collision=2]="Collision",n[n.Fail=3]="Fail",n[n.Finish=4]="Finish"}(Q||(Q={}));var on=O.c.ul(Y||(Y=Object(w.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),rn=O.c.li($||($=Object(w.a)(["\n  list-style: none;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: ",';\n  color: white;\n  margin-right: 1rem;\n  cursor: pointer;\n  user-select: none;\n  box-shadow: 0 0.2rem 0.4rem rgba(0, 0, 0, 0.3);\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  &[data-selected="true"] {\n    pointer-events: none;\n    background-color: ',";\n  }\n"])),(function(n){return n.theme.colors.secondary}),(function(n){return n.theme.colors.primary}));function an(n){for(var t=n.total,e=n.current,o=n.onChange,i=t>5?e-2<1?1:e-2:1,r=t>5?i+4>t?t:i+4:t,a=[],c=i;c<=r;c++)a.push(c);return Object(R.jsx)(on,{className:"paging-list",children:a.map((function(n){return Object(R.jsx)(rn,{"data-selected":n===e,onClick:function(){return o(n)},children:n},"".concat(n))}))})}function cn(n){return{angle:0,position:{x:n?n.x:0,y:n?n.y:0}}}function sn(){var n=Object(y.useState)(0),t=Object(g.a)(n,2),e=t[0],o=t[1],i=Object(y.useState)(Q.Stop),r=Object(g.a)(i,2),a=r[0],c=r[1],s=Object(y.useState)(1/0),l=Object(g.a)(s,2),u=l[0],p=l[1],m=Object(y.useRef)(null),h=Object(y.useRef)(null),f=Object(y.useMemo)(cn,[]),d=Object(y.useMemo)((function(){return{status:Q.Stop}}),[]);Object(y.useEffect)((function(){d.status=a}),[a,d]),Object(y.useEffect)((function(){m.current&&m.current.highlightBlock("")}),[a]);var x=Object(y.useMemo)((function(){return q[e].toolbox}),[e]),b=Object(y.useMemo)((function(){return q[e].blockly}),[e]),j=Object(y.useMemo)((function(){return q[e].map}),[e]);function k(){if(m.current&&h.current){var n=v.a.JavaScript.workspaceToCode(m.current),t=new window.Interpreter(n,h.current.interpreterInitHandler);d.status=Q.Running,c(Q.Running),function n(){d.status===Q.Running&&(t.step()?setTimeout(n,function(){if(!m.current)return!1;var n=["forward","turnLeft","turnRight"].find((function(n){return n===m.current.lastExecutedFunction}));return m.current.lastExecutedFunction="",n}()?500:0):tn({player:f,map:j})?c(Q.Collision):X({player:f,map:j})?c(Q.Finish):c(Q.Fail))}()}}function w(){Object.assign(f,cn(q[e].map.start)),c(Q.Stop)}return Object(R.jsx)(O.a,{theme:E,children:Object(R.jsxs)(F,{className:"app",children:[Object(R.jsx)(_,{}),Object(R.jsx)(B,{}),Object(R.jsxs)(z,{className:"game-button-container",children:[Object(R.jsx)(an,{total:q.length,current:e+1,onChange:function(n){o(n-1),Object.assign(f,cn(q[n-1].map.start)),c(Q.Stop)}}),Object(R.jsx)(en,{remainingBlocks:u,gameRef:h,gameStatus:a,onGameStatusChange:c,map:j,player:f,blocklyWorkspaceRef:m}),Object(R.jsx)(T,{onClick:function(){switch(a){case Q.Running:w();break;case Q.Stop:k();break;case Q.Collision:case Q.Fail:w();break;case Q.Finish:e+1<q.length&&(o(e+1),Object.assign(f,cn(q[e+1].map.start)),c(Q.Stop))}},className:"run-button ".concat(G(a))})]}),Object(R.jsx)(C,{setRemainingBlocks:p,blocklyToolboxConfig:x,blocklyConfig:b,blocklyWorkspaceRef:m})]})})}b.a.render(Object(R.jsx)(d.a.StrictMode,{children:Object(R.jsx)(sn,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.aed7f302.chunk.js.map